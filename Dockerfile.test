# Dockerfile for testing the dotfiles setup script across different distributions.

# --- Ubuntu Test Image ---
FROM ubuntu:22.04 AS ubuntu-test
ARG DEBIAN_FRONTEND=noninteractive
RUN apt-get update && apt-get install -y git sudo curl build-essential gpg wget stow && rm -rf /var/lib/apt/lists/*
RUN useradd -m -G sudo -s /bin/bash tester
RUN echo "tester ALL=(ALL) NOPASSWD: ALL" > /etc/sudoers.d/tester
USER tester
WORKDIR /home/tester/dotfiles

# --- Kali Linux Test Image ---
FROM kalilinux/kali-rolling AS kali-test
ARG DEBIAN_FRONTEND=noninteractive
RUN apt-get update && apt-get install -y git sudo curl build-essential gpg wget stow && rm -rf /var/lib/apt/lists/*
RUN useradd -m -G sudo -s /bin/bash tester
RUN echo "tester ALL=(ALL) NOPASSWD: ALL" > /etc/sudoers.d/tester
USER tester
WORKDIR /home/tester/dotfiles

# --- Parrot OS Test Image ---
FROM parrotsec/core AS parrot-test
ARG DEBIAN_FRONTEND=noninteractive
RUN apt-get update && apt-get install -y git sudo curl build-essential gpg wget stow && rm -rf /var/lib/apt/lists/*
RUN useradd -m -G sudo -s /bin/bash tester
RUN echo "tester ALL=(ALL) NOPASSWD: ALL" > /etc/sudoers.d/tester
USER tester
WORKDIR /home/tester/dotfiles
